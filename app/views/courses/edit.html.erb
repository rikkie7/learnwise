<div data-controller="format capacity dynamic-fields" class="container">
  <h2 class="login-heading">Submit Course</h2>

  <%= simple_form_for(@course, html: { class: "login-form edit-form-with text-start" }) do |f| %>
    <div class="form-inputs">
      <%= f.input :title, input_html: { class: "form-control" } %>
      <%= f.input :description, as: :text, input_html: { class: "form-control large-text-field" } %>
      <%= f.input :category, collection: %w[technology education cooking gardening sports others], input_html: { class: "form-control" } %>

      <%= f.input :size, collection: %w[group private], input_html: {
        class: "form-control",
        data: {
          capacity_target: "size",
          action: "change->capacity#toggleCapacityField"
        }
      } %>

      <div class="d-none" data-capacity-target="capacity">
        <%= f.input :capacity, input_html: { class: "form-control" } %>
      </div>

      <%= f.input :price, input_html: { class: "form-control" } %>

      <%= label_tag "Learning topics", "Learning topics*", class: "form-label" %>
      <div id="leaning-topics-container" data-dynamic-fields-target="container">
        <% @course.learning_topics.each do |topic| %>
          <%= text_field_tag "learning_topic[content][]", topic.content, class: "form-control" %>
        <% end %>
      </div>

      <button type="button" id="add-learning-topic" class="btn btn-primary mb-2" data-action="click->dynamic-fields#addField">+ Add more to your response</button>

      <%= f.input :start_date %>
      <%= f.input :end_date %>

      <%= f.input :format, collection: %w[online in-person], input_html: { class: "form-control", data: { format_target: "format", action: "change->format#togglelocationField" } } %>

      <div class="d-none" data-format-target="location">
        <%= f.input :location, input_html: { class: "form-control" } %>
      </div>

      <%= f.fields_for :user do |user_fields| %>
        <%= user_fields.input :self_introduction, as: :text, placeholder: "About yourself...", input_html: { class: "form-control large-text-field" } %>
      <% end %>
    </div>

    <div class="form-actions">
      <%= f.button :submit, "Submit", class: "btn btn-primary btn-block" %>
    </div>
  <% end %>
</div>
